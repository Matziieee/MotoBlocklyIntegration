package com.google.blockly.android.webview.demo.Activities;

import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.widget.Button;
import android.widget.TextView;

import androidx.appcompat.app.AppCompatActivity;

import com.example.blocklywebview.R;
import com.google.blockly.android.webview.demo.BlocklyTools.BlocklyGamesStore;
import com.livelife.motolibrary.MotoConnection;
import com.livelife.motolibrary.MotoSound;
import com.livelife.motolibrary.OnAntEventListener;

import org.json.JSONArray;
import org.json.JSONException;

import java.io.IOException;

public class HomeActivity extends AppCompatActivity implements OnAntEventListener {
    private final String standardGames = "[   {      \"name\":\"spil1\",      \"isRuleBased\":true,      \"game\":{         \"blocks\":{            \"blocks\":[               {                  \"fields\":{                     \"duration\":30,                     \"players\":1                  },                  \"id\":\"Vbd(KAxZ,[g).g#`q#qc\",                  \"inputs\":{                     \"rules\":{                        \"block\":{                           \"extraState\":\"<mutation xmlns=\\\"http://www.w3.org/1999/xhtml\\\" count=\\\"1\\\"></mutation>\",                           \"fields\":{                              \"condition\":\"on_start\"                           },                           \"id\":\"Zrf-j6.FM/Wfkcge`494\",                           \"inputs\":{                              \"THEN0\":{                                 \"block\":{                                    \"fields\":{                                       \"action\":\"set_tiles_color\",                                       \"col\":\"-1\"                                    },                                    \"id\":\"0-CI)jkoqUFN}?TyP1ue\",                                    \"type\":\"then\"                                 }                              }                           },                           \"next\":{                              \"block\":{                                 \"extraState\":\"<mutation xmlns=\\\"http://www.w3.org/1999/xhtml\\\" count=\\\"1\\\"></mutation>\",                                 \"fields\":{                                    \"condition\":\"on_x_time_passed\",                                    \"num\":2                                 },                                 \"id\":\"6Mi]:vM=/p:E.t$}=/?q\",                                 \"inputs\":{                                    \"THEN0\":{                                       \"block\":{                                          \"fields\":{                                             \"action\":\"set_tiles_color\",                                             \"col\":\"-1\"                                          },                                          \"id\":\"Fsa]!M]T*LK:8GC#=+|P\",                                          \"type\":\"then\"                                       }                                    }                                 },                                 \"next\":{                                    \"block\":{                                       \"extraState\":\"<mutation xmlns=\\\"http://www.w3.org/1999/xhtml\\\" count=\\\"3\\\"></mutation>\",                                       \"fields\":{                                          \"col\":\"1\",                                          \"condition\":\"on_color_press\"                                       },                                       \"id\":\"C(:c|?S|IhaVSqI6kxN;\",                                       \"inputs\":{                                          \"THEN0\":{                                             \"block\":{                                                \"fields\":{                                                   \"action\":\"increment_player_score\",                                                   \"num\":\"0\"                                                },                                                \"id\":\"!RJqa*5,vNC}4x^z{D#}\",                                                \"type\":\"then\"                                             }                                          },                                          \"THEN1\":{                                             \"block\":{                                                \"fields\":{                                                   \"action\":\"set_tiles_color\",                                                   \"col\":\"-1\"                                                },                                                \"id\":\"]YOSqHy::o;[Q?/f+*o^\",                                                \"type\":\"then\"                                             }                                          },                                          \"THEN2\":{                                             \"block\":{                                                \"fields\":{                                                   \"action\":\"play_sound\",                                                   \"sound\":\"m\"                                                },                                                \"id\":\"weH0c-t)Ccb!L~,W@H?d\",                                                \"type\":\"then\"                                             }                                          }                                       },                                       \"type\":\"when\"                                    }                                 },                                 \"type\":\"when\"                              }                           },                           \"type\":\"when\"                        }                     }                  },                  \"type\":\"v2config\",                  \"x\":0,                  \"y\":0               }            ],            \"languageVersion\":0         }      }   },   {      \"name\":\"spil2\",      \"isRuleBased\":true,      \"game\":{         \"blocks\":{            \"blocks\":[               {                  \"fields\":{                     \"duration\":120,                     \"players\":1                  },                  \"id\":\"j)~6:WNn@lXK!IzN6N:=\",                  \"inputs\":{                     \"rules\":{                        \"block\":{                           \"extraState\":\"<mutation xmlns=\\\"http://www.w3.org/1999/xhtml\\\" count=\\\"2\\\"></mutation>\",                           \"fields\":{                              \"condition\":\"on_start\"                           },                           \"id\":\"mYYlL=?RMsO7$*nYFPjF\",                           \"inputs\":{                              \"THEN0\":{                                 \"block\":{                                    \"fields\":{                                       \"action\":\"set_tile_color\",                                       \"col\":\"3\",                                       \"num\":\"-1\"                                    },                                    \"id\":\"5$+Njljg$]4vuGLhe]7_\",                                    \"type\":\"then\"                                 }                              },                              \"THEN1\":{                                 \"block\":{                                    \"fields\":{                                       \"action\":\"set_tile_color\",                                       \"col\":\"1\",                                       \"num\":\"-1\"                                    },                                    \"id\":\"jnEa-sXEwtY^]xcA:x0u\",                                    \"type\":\"then\"                                 }                              }                           },                           \"next\":{                              \"block\":{                                 \"extraState\":\"<mutation xmlns=\\\"http://www.w3.org/1999/xhtml\\\" count=\\\"5\\\"></mutation>\",                                 \"fields\":{                                    \"col\":\"1\",                                    \"condition\":\"on_color_press\"                                 },                                 \"id\":\"rZ#]?/6TN{!N(x;@cLnm\",                                 \"inputs\":{                                    \"THEN0\":{                                       \"block\":{                                          \"fields\":{                                             \"action\":\"set_tiles_color\",                                             \"col\":\"4\"                                          },                                          \"id\":\"A^M@MctH;8T`wUiwq7FJ\",                                          \"type\":\"then\"                                       }                                    },                                    \"THEN1\":{                                       \"block\":{                                          \"fields\":{                                             \"action\":\"register_pattern\",                                             \"name\":\"p1\",                                             \"num\":4                                          },                                          \"id\":\"Di=pU_]V31{lI]kG}h_S\",                                          \"type\":\"then\"                                       }                                    },                                    \"THEN2\":{                                       \"block\":{                                          \"fields\":{                                             \"action\":\"set_tiles_color\",                                             \"col\":\"0\"                                          },                                          \"id\":\"FB.loYj-y8Z7bqZ_g7*i\",                                          \"type\":\"then\"                                       }                                    },                                    \"THEN3\":{                                       \"block\":{                                          \"fields\":{                                             \"action\":\"set_tile_color\",                                             \"col\":\"3\",                                             \"num\":\"-1\"                                          },                                          \"id\":\"){Z((lp~Re+m`Z#n4Wqu\",                                          \"type\":\"then\"                                       }                                    },                                    \"THEN4\":{                                       \"block\":{                                          \"fields\":{                                             \"action\":\"set_tile_color\",                                             \"col\":\"1\",                                             \"num\":\"-1\"                                          },                                          \"id\":\"Rd=r$#;AE+g,z7!h.qj.\",                                          \"type\":\"then\"                                       }                                    }                                 },                                 \"next\":{                                    \"block\":{                                       \"extraState\":\"<mutation xmlns=\\\"http://www.w3.org/1999/xhtml\\\" count=\\\"3\\\"></mutation>\",                                       \"fields\":{                                          \"col\":\"1\",                                          \"condition\":\"on_color_press\"                                       },                                       \"id\":\"r4m}DQZpg-nm?)gzIZgV\",                                       \"inputs\":{                                          \"THEN0\":{                                             \"block\":{                                                \"fields\":{                                                   \"action\":\"play_pattern\",                                                   \"pattern_name\":\"Di=pU_]V31{lI]kG}h_S\"                                                },                                                \"id\":\"C:he1}:my$Xki;DPg0jB\",                                                \"type\":\"then\"                                             }                                          },                                          \"THEN1\":{                                             \"block\":{                                                \"fields\":{                                                   \"action\":\"set_tile_color\",                                                   \"col\":\"3\",                                                   \"num\":\"-1\"                                                },                                                \"id\":\"88%0(Kt^V{V/bIdDv4]6\",                                                \"type\":\"then\"                                             }                                          },                                          \"THEN2\":{                                             \"block\":{                                                \"fields\":{                                                   \"action\":\"set_tile_color\",                                                   \"col\":\"1\",                                                   \"num\":\"-1\"                                                },                                                \"id\":\"RE9Fi5q?;Pc2faVJ`R/e\",                                                \"type\":\"then\"                                             }                                          }                                       },                                       \"next\":{                                          \"block\":{                                             \"extraState\":\"<mutation xmlns=\\\"http://www.w3.org/1999/xhtml\\\" count=\\\"1\\\"></mutation>\",                                             \"fields\":{                                                \"condition\":\"on_any_press\"                                             },                                             \"id\":\"!#HYDQ*n@!9[q`LG`,=6\",                                             \"inputs\":{                                                \"THEN0\":{                                                   \"block\":{                                                      \"fields\":{                                                         \"action\":\"play_sound\",                                                         \"sound\":\"p1\"                                                      },                                                      \"id\":\"f!:%L~2UD)wfn)5sj%t;\",                                                      \"type\":\"then\"                                                   }                                                }                                             },                                             \"type\":\"when\"                                          }                                       },                                       \"type\":\"when\"                                    }                                 },                                 \"type\":\"when\"                              }                           },                           \"type\":\"when\"                        }                     }                  },                  \"type\":\"v2config\",                  \"x\":0,                  \"y\":0               }            ],            \"languageVersion\":0         }      }   },   {      \"name\":\"simon says\",      \"isRuleBased\":true,      \"game\":{         \"blocks\":{            \"blocks\":[               {                  \"fields\":{                     \"duration\":120,                     \"players\":2                  },                  \"id\":\"81hIT[0YS!kRbCU5#?FH\",                  \"inputs\":{                     \"rules\":{                        \"block\":{                           \"extraState\":\"\\u003Cmutation xmlns=\\\"http://www.w3.org/1999/xhtml\\\" count=\\\"2\\\">\\u003C/mutation>\",                           \"fields\":{                              \"condition\":\"on_start\"                           },                           \"id\":\"1WF%eij`LKi-%OpJEo{1\",                           \"inputs\":{                              \"THEN0\":{                                 \"block\":{                                    \"fields\":{                                       \"action\":\"set_tiles_color\",                                       \"col\":\"-1\"                                    },                                    \"id\":\"~-XuhsM?vW_1/)$2Bt,^\",                                    \"type\":\"then\"                                 }                              },                              \"THEN1\":{                                 \"block\":{                                    \"fields\":{                                       \"action\":\"activate_subrule\",                                       \"rule_name\":\";aO{=KtemhiiYt+]|cNz\"                                    },                                    \"id\":\"Mn+}J[jHl6[O}a;K!w/V\",                                    \"type\":\"then\"                                 }                              }                           },                           \"next\":{                              \"block\":{                                 \"extraState\":\"\\u003Cmutation xmlns=\\\"http://www.w3.org/1999/xhtml\\\" count=\\\"1\\\">\\u003C/mutation>\",                                 \"fields\":{                                    \"condition\":\"on_end\"                                 },                                 \"id\":\"*CK3!Ua){;O3ezU!ive0\",                                 \"inputs\":{                                    \"THEN0\":{                                       \"block\":{                                          \"fields\":{                                             \"action\":\"play_sound\",                                             \"sound\":\"end\"                                          },                                          \"id\":\"`**XY9G}SQLt:s-Wb0PB\",                                          \"type\":\"then\"                                       }                                    }                                 },                                 \"next\":{                                    \"block\":{                                       \"extraState\":\"\\u003Cmutation xmlns=\\\"http://www.w3.org/1999/xhtml\\\" count=\\\"1\\\">\\u003C/mutation>\",                                       \"fields\":{                                          \"condition\":\"on_any_press\"                                       },                                       \"id\":\"j?]!zrABvIx`bGbfK6L{\",                                       \"inputs\":{                                          \"THEN0\":{                                             \"block\":{                                                \"fields\":{                                                   \"action\":\"play_sound\",                                                   \"sound\":\"m\"                                                },                                                \"id\":\"4qXU6zJ3Qm:z/XLV]W}/\",                                                \"type\":\"then\"                                             }                                          }                                       },                                       \"type\":\"when\"                                    }                                 },                                 \"type\":\"when\"                              }                           },                           \"type\":\"when\"                        }                     }                  },                  \"type\":\"v2config\",                  \"x\":-406,                  \"y\":-52               },               {                  \"fields\":{                     \"name\":\"1\",                     \"replaceRules\":false                  },                  \"id\":\";aO{=KtemhiiYt+]|cNz\",                  \"inputs\":{                     \"rules\":{                        \"block\":{                           \"extraState\":\"\\u003Cmutation xmlns=\\\"http://www.w3.org/1999/xhtml\\\" count=\\\"5\\\">\\u003C/mutation>\",                           \"fields\":{                              \"condition\":\"on_sub_config\",                              \"rule_name\":\";aO{=KtemhiiYt+]|cNz\"                           },                           \"id\":\"YKZob4FXv^mk_J$8t][/\",                           \"inputs\":{                              \"THEN0\":{                                 \"block\":{                                    \"fields\":{                                       \"action\":\"play_sound\",                                       \"sound\":\"start\"                                    },                                    \"id\":\"H2srQ#+8|h:*ucN6*SBO\",                                    \"type\":\"then\"                                 }                              },                              \"THEN1\":{                                 \"block\":{                                    \"fields\":{                                       \"action\":\"register_pattern\",                                       \"name\":\"p1\",                                       \"num\":5                                    },                                    \"id\":\"%vhfkvHkf:ubMY}iW(sI\",                                    \"type\":\"then\"                                 }                              },                              \"THEN2\":{                                 \"block\":{                                    \"fields\":{                                       \"action\":\"play_pattern\",                                       \"pattern_name\":\"%vhfkvHkf:ubMY}iW(sI\"                                    },                                    \"id\":\"kBf7%~T)b~rzUyfhWoOL\",                                    \"type\":\"then\"                                 }                              },                              \"THEN3\":{                                 \"block\":{                                    \"fields\":{                                       \"action\":\"set_tiles_color\",                                       \"col\":\"-1\"                                    },                                    \"id\":\"TSQkJ@T;^.0hv7^YRm1T\",                                    \"type\":\"then\"                                 }                              },                              \"THEN4\":{                                 \"block\":{                                    \"fields\":{                                       \"action\":\"wait_sequence\",                                       \"correct_name\":\"`Z#G}a^GX]]p|{@qv_83\",                                       \"incorrect_name\":\"h#Oj4a-{pURjhUzsxVFp\",                                       \"seq_name\":\"%vhfkvHkf:ubMY}iW(sI\"                                    },                                    \"id\":\"}zi/AWfgM1PqZTGLl/G_\",                                    \"type\":\"then\"                                 }                              }                           },                           \"type\":\"when\"                        }                     }                  },                  \"type\":\"subConfig\",                  \"x\":-409,                  \"y\":470               },               {                  \"fields\":{                     \"name\":\"2\",                     \"replaceRules\":false                  },                  \"id\":\"`Z#G}a^GX]]p|{@qv_83\",                  \"inputs\":{                     \"rules\":{                        \"block\":{                           \"extraState\":\"\\u003Cmutation xmlns=\\\"http://www.w3.org/1999/xhtml\\\" count=\\\"5\\\">\\u003C/mutation>\",                           \"fields\":{                              \"condition\":\"on_sub_config\",                              \"rule_name\":\"`Z#G}a^GX]]p|{@qv_83\"                           },                           \"id\":\"P!f.k?U,[^K)G-EIqUw?\",                           \"inputs\":{                              \"THEN0\":{                                 \"block\":{                                    \"fields\":{                                       \"action\":\"play_sound\",                                       \"sound\":\"start\"                                    },                                    \"id\":\"%Vdaa)Q]mNWHO)XV|V5n\",                                    \"type\":\"then\"                                 }                              },                              \"THEN1\":{                                 \"block\":{                                    \"fields\":{                                       \"action\":\"register_pattern\",                                       \"name\":\"p2\",                                       \"num\":5                                    },                                    \"id\":\"`6owgVUD3$tTy8CV*YZe\",                                    \"type\":\"then\"                                 }                              },                              \"THEN2\":{                                 \"block\":{                                    \"fields\":{                                       \"action\":\"play_pattern\",                                       \"pattern_name\":\"`6owgVUD3$tTy8CV*YZe\"                                    },                                    \"id\":\".A?_ueP%GyPFM?oy+};p\",                                    \"type\":\"then\"                                 }                              },                              \"THEN3\":{                                 \"block\":{                                    \"fields\":{                                       \"action\":\"set_tiles_color\",                                       \"col\":\"-1\"                                    },                                    \"id\":\"{6O,Z/g[YOLSMxVj`j^E\",                                    \"type\":\"then\"                                 }                              },                              \"THEN4\":{                                 \"block\":{                                    \"fields\":{                                       \"action\":\"wait_sequence\",                                       \"correct_name\":\";aO{=KtemhiiYt+]|cNz\",                                       \"incorrect_name\":\"h#Oj4a-{pURjhUzsxVFp\",                                       \"seq_name\":\"`6owgVUD3$tTy8CV*YZe\"                                    },                                    \"id\":\"T$L^2DDxaxG7u@M*=R)Z\",                                    \"type\":\"then\"                                 }                              }                           },                           \"type\":\"when\"                        }                     }                  },                  \"type\":\"subConfig\",                  \"x\":-416,                  \"y\":1017               },               {                  \"fields\":{                     \"name\":\"end\",                     \"replaceRules\":false                  },                  \"id\":\"h#Oj4a-{pURjhUzsxVFp\",                  \"inputs\":{                     \"rules\":{                        \"block\":{                           \"extraState\":\"\\u003Cmutation xmlns=\\\"http://www.w3.org/1999/xhtml\\\" count=\\\"1\\\">\\u003C/mutation>\",                           \"fields\":{                              \"condition\":\"on_sub_config\",                              \"rule_name\":\"h#Oj4a-{pURjhUzsxVFp\"                           },                           \"id\":\"~N4+t?JY,,_+.h!dqa2~\",                           \"inputs\":{                              \"THEN0\":{                                 \"block\":{                                    \"fields\":{                                       \"action\":\"stop_game\"                                    },                                    \"id\":\"E7#_BDNX4E4KiYfMap%q\",                                    \"type\":\"then\"                                 }                              }                           },                           \"type\":\"when\"                        }                     }                  },                  \"type\":\"subConfig\",                  \"x\":111,                  \"y\":-57               }            ],            \"languageVersion\":0         }      }   },   {      \"name\":\"pair race\",      \"isRuleBased\":true,      \"game\":{         \"blocks\":{            \"blocks\":[               {                  \"fields\":{                     \"duration\":30,                     \"players\":1                  },                  \"id\":\"peI`X/5GLdGG?3(5bE=;\",                  \"inputs\":{                     \"rules\":{                        \"block\":{                           \"extraState\":\"\\u003Cmutation xmlns=\\\"http://www.w3.org/1999/xhtml\\\" count=\\\"2\\\">\\u003C/mutation>\",                           \"fields\":{                              \"condition\":\"on_start\"                           },                           \"id\":\"8{.B@*eEc|pTJi:ZCesw\",                           \"inputs\":{                              \"THEN0\":{                                 \"block\":{                                    \"fields\":{                                       \"action\":\"def_ran_pair\",                                       \"name\":\"pair\"                                    },                                    \"id\":\"8.UDaqn{s$IJk1+ZyPO5\",                                    \"type\":\"then\"                                 }                              },                              \"THEN1\":{                                 \"block\":{                                    \"fields\":{                                       \"action\":\"turn_pair_on\",                                       \"col\":\"1\",                                       \"pair_name\":\"8.UDaqn{s$IJk1+ZyPO5\"                                    },                                    \"id\":\"S7#(7^D+Uas^h6ixBGLV\",                                    \"type\":\"then\"                                 }                              }                           },                           \"next\":{                              \"block\":{                                 \"extraState\":\"\\u003Cmutation xmlns=\\\"http://www.w3.org/1999/xhtml\\\" count=\\\"1\\\">\\u003C/mutation>\",                                 \"fields\":{                                    \"col\":\"1\",                                    \"condition\":\"on_color_press\"                                 },                                 \"id\":\"#n|Ph~n5zHbbozi$PV_d\",                                 \"inputs\":{                                    \"THEN0\":{                                       \"block\":{                                          \"fields\":{                                             \"action\":\"play_sound\",                                             \"sound\":\"p1\"                                          },                                          \"id\":\"`IZ[+8}7~crs[nLdriD?\",                                          \"type\":\"then\"                                       }                                    }                                 },                                 \"next\":{                                    \"block\":{                                       \"extraState\":\"\\u003Cmutation xmlns=\\\"http://www.w3.org/1999/xhtml\\\" count=\\\"5\\\">\\u003C/mutation>\",                                       \"fields\":{                                          \"condition\":\"pair_pressed\",                                          \"pair_name\":\"8.UDaqn{s$IJk1+ZyPO5\"                                       },                                       \"id\":\"um:V/w3MP_8h40^gNfSy\",                                       \"inputs\":{                                          \"THEN0\":{                                             \"block\":{                                                \"fields\":{                                                   \"action\":\"set_tiles_color\",                                                   \"col\":\"0\"                                                },                                                \"id\":\"S-mfS|Dq;x,:1P}=x94O\",                                                \"type\":\"then\"                                             }                                          },                                          \"THEN1\":{                                             \"block\":{                                                \"fields\":{                                                   \"action\":\"def_ran_pair\",                                                   \"name\":\"pair\"                                                },                                                \"id\":\"7teS!~_Qsqnn|YKr.eA#\",                                                \"type\":\"then\"                                             }                                          },                                          \"THEN2\":{                                             \"block\":{                                                \"fields\":{                                                   \"action\":\"turn_pair_on\",                                                   \"col\":\"1\",                                                   \"pair_name\":\"8.UDaqn{s$IJk1+ZyPO5\"                                                },                                                \"id\":\"0O9ksUNVz;TLk58ie+)_\",                                                \"type\":\"then\"                                             }                                          },                                          \"THEN3\":{                                             \"block\":{                                                \"fields\":{                                                   \"action\":\"play_sound\",                                                   \"sound\":\"m\"                                                },                                                \"id\":\"T*m{zLuqGJ@VDUG}f8{h\",                                                \"type\":\"then\"                                             }                                          },                                          \"THEN4\":{                                             \"block\":{                                                \"fields\":{                                                   \"action\":\"increment_player_score\",                                                   \"num\":\"0\"                                                },                                                \"id\":\"NZJ5R7A$1n]GdTMPfRpa\",                                                \"type\":\"then\"                                             }                                          }                                       },                                       \"type\":\"when\"                                    }                                 },                                 \"type\":\"when\"                              }                           },                           \"type\":\"when\"                        }                     }                  },                  \"type\":\"v2config\",                  \"x\":-461,                  \"y\":-17               }            ],            \"languageVersion\":0         }      }   }]";
    MotoConnection connection = MotoConnection.getInstance();
    MotoSound sound = MotoSound.getInstance();
    TextView statusTextView;
    Button pairingButton, practiceBtn, createGameBtn;
    boolean isPairing;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.home);

        connection.startMotoConnection(HomeActivity.this);
        connection.saveRfFrequency(66);
        connection.setDeviceId(43);
        connection.registerListener(HomeActivity.this);

        statusTextView = findViewById(R.id.statusTextView);
        pairingButton = findViewById(R.id.pairingButton);
        practiceBtn = findViewById(R.id.practiceBtn);
        createGameBtn = findViewById(R.id.createGameBtn);

        practiceBtn.setOnClickListener(v -> {
            connection.unregisterListener(this);
            Intent i = new Intent(this, PracticeGamesActivity.class);
            startActivity(i);
        });

        createGameBtn.setOnClickListener(v -> {
            connection.unregisterListener(this);
            Intent i = new Intent(this, CreateGamesActivity.class);
            startActivity(i);
        });

        pairingButton.setOnClickListener(view -> {
            if(!isPairing){
                connection.pairTilesStart();
                pairingButton.setText("Stop pairing!");
            }else{
                connection.pairTilesStop();
                pairingButton.setText("Start pairing!");
            }
            isPairing = !isPairing;
        });
        //sound.initializeSounds(this);
        try {
            addStandardGamesIfMissing();
        } catch (JSONException | IOException e) {
            Log.e("ERROR", "onCreate: Failed to add standard games " + e);
        }
    }

    @Override
    public void onMessageReceived(byte[] bytes, long l) {

    }

    @Override
    public void onAntServiceConnected() {
        connection.setAllTilesToInit();
    }

    @Override
    public void onNumbersOfTilesConnected(final int i) {
        runOnUiThread(() -> statusTextView.setText(i +" connected tiles"));
    }

    @Override
    protected void onPause() {
        super.onPause();
    }
    @Override
    protected void onRestart() {
        super.onRestart();
        connection.registerListener(this);
    }
    @Override
    protected void onDestroy() {
        super.onDestroy();
        connection.stopMotoConnection();
        connection.unregisterListener(this);
    }

    private void addStandardGamesIfMissing() throws JSONException, IOException {

        JSONArray arr = new JSONArray(standardGames);
        JSONArray games = BlocklyGamesStore.getInstance().getGames(this);
        for (int i = 0; i < arr.length(); i++) {
            String name = arr.getJSONObject(i).getString("name");
            boolean exists = false;
            for (int j = 0; j < games.length(); j++) {
                if(games.getJSONObject(j).getString("name").equals(name)){
                    exists = true;
                }
            }
            if(!exists){
                BlocklyGamesStore.getInstance().saveGame(
                        this,
                        arr.getJSONObject(i).getJSONObject("game"),
                        name,
                        arr.getJSONObject(i).getBoolean("isRuleBased"));
            }
        }

    }
}